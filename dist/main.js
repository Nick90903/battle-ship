(()=>{"use strict";var e={d:(t,l)=>{for(var s in l)e.o(l,s)&&!e.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:l[s]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};e.d({},{T:()=>S,D:()=>L});const t=(e,t,l)=>{let s=e,i=0,o=!1,c=[],a=[];for(let s=0;s<e;s++)c.push(n(t,s,l));c.forEach((e=>{a.push(e.hull)}));const r=()=>i==s&&(o=!0,a.forEach((e=>{e.classList.add("sunk")})),!0);return{hit:(e,t,l)=>l?(c[e].countHit(t),i++,r(),c[e].isHit()):void 0,isSunk:r,checkSunk:()=>o,shipSize:s,hullDiv:a}};let l=[t(2,0,"p"),t(3,1,"p"),t(3,2,"p"),t(4,3,"p"),t(5,4,"p")],s=[t(2,0,"o"),t(3,1,"o"),t(3,2,"o"),t(4,3,"o"),t(5,4,"o")];console.log(l);let i=0;function n(e,t,l){let n=document.createElement("div");n.classList.add("board"),n.classList.add("hull"),n.classList.add(`ship${e}`),n.value=t,"p"==l||n.addEventListener("click",(function(){S()&&(s[this.classList[2].slice(4)].hit(this.value,this,!0),s[this.classList[2].slice(4)].checkSunk()&&(console.log("issunk"+s[this.classList[2].slice(4)].checkSunk()),i++,console.log(i)),i>=s.length&&""==document.querySelector(".winner").textContent&&(document.querySelector(".winner").textContent="Player Wins"),p())}));let o=!1;return{hull:n,countHit:e=>{o=!0,e.classList.add("hit")},isHit:()=>o}}function o(e,t){const l=document.createElement("div");l.classList.add("boardContainer"),l.classList.add(t+"container");let s=0;for(let i=0;i<Math.pow(e,2);i++){let e=document.createElement("div");e.classList.add("board"),"player"==t?(e.classList.add("p"+s),e.addEventListener("click",(function(){r(this.classList[1])}))):(e.classList.add("o"+s),e.addEventListener("click",(function(){var e;S()&&(e=this.classList[1],f.includes(e)||(document.querySelector(`.${e}`).classList.add("miss"),f.push(e),p()))}))),e.classList.add(t),l.appendChild(e),s++}return document.querySelector(".content").appendChild(l),s}function c(e,t){console.log(`Placing boat ${t} at ${e}`);let l=document.querySelector(`.${e}`),s=t;s.classList.add(l.classList[1]),s.classList.add(l.classList[2]),l.parentNode.replaceChild(s,l)}let a=0;function r(e){if(a<l.length){let t=l[a],s=parseInt(e.slice(1,3));if(!L(s,t.shipSize,"p"))return;if(s>9){if(!(10-parseInt(e.slice(2))>=t.shipSize))return;{let e=t.hullDiv;for(let l=0;l<t.shipSize;l++)c(`p${s+l}`,e[l])}}else{if(!(10-e.slice(1)>=t.shipSize))return;{let e=t.hullDiv;for(let l=0;l<t.shipSize;l++)c(`p${s+l}`,e[l])}}document.querySelector(`.ship${a}`).classList.add("used"),a++}}!function(){let e=document.querySelector(".shipContent");for(let t=0;t<l.length;t++){let s=document.createElement("div");s.classList.add(`ship${t}`),s.classList.add("shipPreview");let i=l[t].hullDiv;console.log(i+"temp"),i.forEach((e=>{s.appendChild(e)})),e.appendChild(s)}}();let d=0,u=[],h=0;function p(){let e=Math.floor(100*Math.random());if(u.includes(e))u.length<100&&p();else{const t=document.querySelector(`.p${e}`);t.classList.contains("hull")?(l[t.classList[2].slice(4)].hit(t.value,t,!0),l[t.classList[2].slice(4)].checkSunk()?h++:console.log("hit Ship"),h>=l.length&&""==document.querySelector(".winner").textContent&&(document.querySelector(".winner").textContent="Ai Wins")):(console.log("missed Ship"),t.classList.add("attacked")),u.push(e)}}let f=[];function L(e,t,l){let s=[];if(e+t+2>99)return!1;for(let i=0;i<t;i++)document.querySelector(`.${l}${e+i}`).classList.forEach((e=>{s.push(e)}));return console.log(s),console.log(`Contains Hull? ${s.includes("hull")}`),!s.includes("hull")}function S(){return a==l.length}o(10,"player"),o(10,"opponent"),function e(){let t=Math.floor(100*Math.random());if(console.log(d),d<s.length){let l=s[d];if(L(t,l.shipSize,"o"))if(t>9)if(10-parseInt(t.toString().slice(1))>=l.shipSize){let s=l.hullDiv;for(let e=0;e<l.shipSize;e++)c(`o${t+e}`,s[e]);d++,e()}else e();else if(10-t>=l.shipSize){let s=l.hullDiv;for(let e=0;e<l.shipSize;e++)c(`o${t+e}`,s[e]);d++,e()}else e();else e()}}(),document.querySelector(".reload").addEventListener("click",(()=>location.reload()))})();